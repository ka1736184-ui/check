<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Вход / Регистрация</title>
<style>
body{font-family:Arial,sans-serif;background:#0d0f12;color:#fff;display:flex;justify-content:center;align-items:center;height:100vh;margin:0}
.card{background:#14171c;padding:24px;border-radius:12px;width:320px;text-align:center}
input{width:100%;padding:10px;margin:8px 0;border-radius:8px;border:1px solid #333;background:#0f1316;color:#fff}
button{padding:10px 15px;border:none;border-radius:8px;background:#4c6ef5;color:#fff;cursor:pointer;width:100%;margin-top:8px}
</style>
</head>
<body>
<div class="card">
  <h2>Вход / Регистрация</h2>
  <input id="loginInput" placeholder="Логин">
  <input id="passInput" type="password" placeholder="Пароль">
  <button id="loginBtn">Войти</button>
  <button id="registerBtn">Зарегистрироваться</button>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js";
import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-auth.js";
import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyC4X8TIIegH0En1tuUspJtixyc-dcx1_9Y",
  authDomain: "studia-35b43.firebaseapp.com",
  projectId: "studia-35b43",
  storageBucket: "studia-35b43.firebasestorage.app",
  messagingSenderId: "186158637676",
  appId: "1:186158637676:web:e62c3261a06441e4fb2e49",
  measurementId: "G-L339B7CMZK"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth();
const db = getFirestore();

const ADMIN_LOGIN = "masileka";
const ADMIN_PASS = "FjkgFsawqER!1";

document.getElementById('loginBtn').onclick = async () => {
  const login = document.getElementById('loginInput').value.trim();
  const pass = document.getElementById('passInput').value.trim();
  if(!login || !pass){ alert("Введите логин и пароль"); return; }
  try {
    await signInWithEmailAndPassword(auth, login + "@example.com", pass);
    window.location.href = "panel.html";
  } catch(e){ alert("Неверный логин или пароль"); }
};

document.getElementById('registerBtn').onclick = async () => {
  const login = document.getElementById('loginInput').value.trim();
  const pass = document.getElementById('passInput').value.trim();
  if(!login || !pass){ alert("Введите логин и пароль"); return; }
  try {
    await createUserWithEmailAndPassword(auth, login + "@example.com", pass);
    const isAdmin = (login === ADMIN_LOGIN && pass === ADMIN_PASS);
    await setDoc(doc(db, "users", login), { admin: isAdmin });
    alert("Регистрация успешна! Теперь войдите.");
  } catch(e){ alert("Ошибка регистрации: "+e.message); }
};
</script>
</body>
</html>
